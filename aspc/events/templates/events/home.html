{% extends "events/base.html" %}
{% load url from future %}

{% block "ogdesc" %}Information on upcoming events for Claremont Colleges students.{% endblock %}
{% block "metadesc" %}Information on upcoming events for Claremont Colleges students.{% endblock %}

{% block "head" %}
{{ block.super }}
<script type="text/javascript">
// Set up namespacing
var ASPC = ASPC || {};
ASPC.Events = ASPC.Events || {};
ASPC.Events.calendar_data = ASPC.Events.calendar_data || {};

ASPC.Events.calendar_data.events = [
	{% for event in events %}
		{
			'title': '{{event.name}}',
			'start': new Date({{event.start|date:"U"}} * 1000),
			{% if event.end %}
				'end': new Date({{event.end|date:"U"}} * 1000),
			{% else %}
				'end': null,
			{% endif %}
			'location': '{{event.location}}',
			'description': '{{event.description}}',
			'url': '/events/{{event.id}}',
			'allDay': false
		}
		{% if not forloop.last %}
		,
		{% endif %}
	{% endfor %}
];

ASPC.Events.calendar_data.earliest_event_datetime = new Date(
	{% if earliest_event_datetime %}
		{{earliest_event_datetime|date:"U"}}
	{% else %}
		0
	{% endif %}
	* 1000);
ASPC.Events.calendar_data.latest_event_datetime = new Date(
	{% if latest_event_datetime %}
		{{latest_event_datetime|date:"U"}}
	{% else %}
		0
	{% endif %}
	* 1000);
</script>
{% endblock %}

{% block "outer_content" %}
<div class="content">
	<br />
	<div id="calendar">
	</div>

	<div id="facebook_event_submission">
		<h1>Submit a Facebook Event</h1>
		<label for="facebook_event_url">Facebook Event URL:</label><input type="text" id="facebook_event_url" name="facebook_event_url" />
		<input type="button" value="Submit" onClick="ASPC.Events.submit_facebook_event()"/>
		<div id="facebook_event_submit_status"></div>
	</div>

	<div id="manual_event_submission">
		<h1>Submit an Event</h1>
		<table>
			<tr>
				<td>
					Name
				</td>
				<td>
					<input type="text" id="manual_event_name">
				</td>
			</tr>
			<tr>
				<td>
					Host
				</td>
				<td>
					<input type="text" id="manual_event_host">
				</td>
			</tr>
			<tr>
				<td>
					Start
				</td>
				<td>
					<input type="datetime-local" id="manual_event_start" />
				</td>
			</tr>
			<tr>
				<td>
					End
				</td>
				<td>
					<input type="datetime-local" id="manual_event_end" />
				</td>
			</tr>
			<tr>
				<td>
					Location
				</td>
				<td>
					<input type="text" id="manual_event_location">
				</td>
			</tr>
			<tr>
				<td>
					Description
				</td>
				<td>
					<textarea id="manual_event_description" cols="30" rows="5"></textarea>
				</td>
			</tr>
			<tr>
				<td>
					Link
				</td>
				<td>
					<input type="text" id="manual_event_url">
				</td>
			</tr>
			<tr>
				<td>
					<input type="button" value="Submit" onClick="ASPC.Events.submit_manual_event()"/>
				</td>
		</table>
		<div id="manual_event_submit_status"></div>
	</div>

</div>
{% csrf_token %}
{% endblock %}